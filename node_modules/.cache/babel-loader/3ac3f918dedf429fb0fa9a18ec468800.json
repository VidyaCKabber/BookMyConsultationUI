{"ast":null,"code":"var _jsxFileName = \"/Users/vikabber/Desktop/Projects/Projects/BookMyConsultationUI/src/screens/login/Login.js\";\nimport React, { useState } from 'react';\nimport { FormControl, InputLabel, Input, Button, Paper } from '@material-ui/core';\nimport './Login.css';\nconst Login = ({\n  onLogin,\n  onClose\n}) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [emailError, setEmailError] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n  const handleLogin = async () => {\n    // Reset errors\n    setEmailError('');\n    setPasswordError('');\n\n    // Basic validation\n    if (!email) {\n      setEmailError('Please fill out this field');\n      return;\n    }\n    if (!password) {\n      setPasswordError('Please fill out this field');\n      return;\n    }\n    try {\n      // Construct basic authentication token\n      const basicAuthToken = btoa(`${email}:${password}`);\n      console.log(basicAuthToken);\n      const response = await fetch('http://localhost:8080/auth/login', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Basic ${basicAuthToken}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      // Retrieve the access token from the response\n      const data = await response.json();\n      if (!response.ok) {\n        setPasswordError(data.message);\n        return;\n      }\n      const accessToken = data.accessToken.trim();\n      const userId = data.id;\n      const userName = btoa(`${data.firstName} ${data.lastName}`);\n      const userEmailId = data.emailAddress;\n      console.log(data);\n      // Store the access token in localStorage or sessionStorage\n      localStorage.setItem('accessToken', accessToken);\n      localStorage.setItem('isLoggedIn', true);\n      localStorage.setItem('userId', userId);\n      localStorage.setItem('userName', userName);\n      localStorage.setItem('userEmailId', userEmailId);\n\n      // Navigate to the home page\n      // code to be implemented\n    } catch (error) {\n      console.error('Login failed:', error);\n      setPasswordError('Failed to Login in');\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    fullWidth: true,\n    margin: \"normal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"Email *\"), /*#__PURE__*/React.createElement(Input, {\n    id: \"email\",\n    type: \"email\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }), emailError && /*#__PURE__*/React.createElement(Paper, {\n    className: \"error-popup\",\n    elevation: 3,\n    style: {\n      backgroundColor: 'black',\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 32\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 130\n    }\n  }, emailError))), /*#__PURE__*/React.createElement(FormControl, {\n    fullWidth: true,\n    margin: \"normal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, \"Password *\"), /*#__PURE__*/React.createElement(Input, {\n    id: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }), passwordError && /*#__PURE__*/React.createElement(Paper, {\n    className: \"error-popup\",\n    elevation: 3,\n    style: {\n      backgroundColor: 'black',\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 133\n    }\n  }, passwordError))), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    style: {\n      margin: 'auto',\n      display: 'block',\n      marginTop: '25px'\n    },\n    onClick: handleLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"LOGIN\"));\n};\nexport default Login;","map":{"version":3,"names":["React","useState","FormControl","InputLabel","Input","Button","Paper","Login","onLogin","onClose","email","setEmail","password","setPassword","emailError","setEmailError","passwordError","setPasswordError","handleLogin","basicAuthToken","btoa","console","log","response","fetch","method","headers","data","json","ok","message","accessToken","trim","userId","id","userName","firstName","lastName","userEmailId","emailAddress","localStorage","setItem","error","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","fullWidth","margin","htmlFor","type","value","onChange","e","target","elevation","style","backgroundColor","color","variant","display","marginTop","onClick"],"sources":["/Users/vikabber/Desktop/Projects/Projects/BookMyConsultationUI/src/screens/login/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { FormControl, InputLabel, Input, Button, Paper } from '@material-ui/core';\nimport './Login.css';\n\nconst Login = ({ onLogin, onClose }) => {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [emailError, setEmailError] = useState('');\n    const [passwordError, setPasswordError] = useState('');\n\n    const handleLogin = async () => {\n        // Reset errors\n        setEmailError('');\n        setPasswordError('');\n\n        // Basic validation\n        if (!email) {\n            setEmailError('Please fill out this field');\n            return;\n        }\n        if (!password) {\n            setPasswordError('Please fill out this field');\n            return;\n        }\n\n        try {\n            // Construct basic authentication token\n            const basicAuthToken = btoa(`${email}:${password}`);\n            console.log(basicAuthToken);\n            const response = await fetch('http://localhost:8080/auth/login', {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Basic ${basicAuthToken}`,\n                    'Content-Type': 'application/json',\n                }\n            });\n\n            // Retrieve the access token from the response\n            const data = await response.json();\n            if (!response.ok) {\n                setPasswordError(data.message);\n                return;\n            }\n            const accessToken = data.accessToken.trim();\n            const userId = data.id;\n            const userName = btoa(`${data.firstName} ${data.lastName}`); \n            const userEmailId = data.emailAddress;\n            console.log(data);\n            // Store the access token in localStorage or sessionStorage\n            localStorage.setItem('accessToken', accessToken);\n            localStorage.setItem('isLoggedIn', true);\n            localStorage.setItem('userId', userId);\n            localStorage.setItem('userName', userName);\n            localStorage.setItem('userEmailId', userEmailId);\n\n            // Navigate to the home page\n            // code to be implemented\n            \n        } catch (error) {\n            console.error('Login failed:', error);\n            setPasswordError('Failed to Login in');\n        }\n    };\n\n\n    return (\n        <div className=\"login-modal\">\n            <FormControl fullWidth margin=\"normal\">\n                <InputLabel htmlFor=\"email\">Email *</InputLabel>\n                <Input\n                    id=\"email\"\n                    type=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                />\n                {emailError && <Paper className=\"error-popup\" elevation={3} style={{ backgroundColor: 'black', color: 'white' }}><span>{emailError}</span></Paper>}\n            </FormControl>\n            <FormControl fullWidth margin=\"normal\">\n                <InputLabel htmlFor=\"password\">Password *</InputLabel>\n                <Input\n                    id=\"password\"\n                    type=\"password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                />\n                {passwordError && <Paper className=\"error-popup\" elevation={3} style={{ backgroundColor: 'black', color: 'white' }}><span>{passwordError}</span></Paper>}\n            </FormControl>\n            <Button variant=\"contained\" color=\"primary\" style={{ margin: 'auto', display: 'block', marginTop:'25px' }} onClick={handleLogin}>\n                LOGIN\n            </Button>\n        </div>\n    );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}